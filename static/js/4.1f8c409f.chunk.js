(this["webpackJsonpreact-chat-app"]=this["webpackJsonpreact-chat-app"]||[]).push([[4],{111:function(e,t){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){e.exports=a.p+"static/media/startConversation.d2c64057.svg"},123:function(e,t,a){},124:function(e,t,a){e.exports=a.p+"static/media/doneforyou.8a8b917c.mp3"},125:function(e,t,a){},126:function(e,t,a){e.exports=a.p+"static/media/no-wifi.087804c8.svg"},127:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(16),s=a(19),l=a(18),o=a(0),c=a.n(o),i=a(84),u=a(14),m=a(17),d=a(85),g=a.n(d),h=a(114),p=new(function(){function e(){Object(n.a)(this,e),this.socket=null,this.eventEmitter=new h.EventEmitter}return Object(r.a)(e,[{key:"createSocketConnection",value:function(e){try{this.socket=g.a.connect("https://my-chat-app-server-0707.herokuapp.com",{query:"userId=".concat(e)})}catch(t){throw new Error("Something went wrong. We can't connect to server")}return!0}},{key:"getChatList",value:function(e){var t=this;this.socket.emit("chat-list",{userId:e},(function(e){var a=e.error,n=e.message;a&&t.eventEmitter.emit("chat-list-response",{error:a,message:n})})),this.socket.on("chat-list-response",(function(e){t.eventEmitter.emit("chat-list-response",e)}))}},{key:"sendMessage",value:function(e){this.socket.emit("add-message",e)}},{key:"receiveMessage",value:function(){var e=this;this.socket.on("add-message-response",(function(t){e.eventEmitter.emit("add-message-response",t)}))}},{key:"typingMessage",value:function(e){this.socket.emit("typing-message",{toUserId:e},(function(e){e.error;var t=e.message;console.log("error",t)}))}},{key:"receiveTypingMessage",value:function(){var e=this;this.socket.on("typing-message-response",(function(t){e.eventEmitter.emit("typing-message-response",t)}))}}]),e}());a(115);a.p;function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var E=c.a.createElement("path",{d:"M27.526,18.036L27,17.732c-0.626-0.361-1-1.009-1-1.732s0.374-1.371,1-1.732l0.526-0.304  c1.436-0.83,1.927-2.662,1.098-4.098l-1-1.732c-0.827-1.433-2.666-1.925-4.098-1.098L23,7.339c-0.626,0.362-1.375,0.362-2,0  c-0.626-0.362-1-1.009-1-1.732V5c0-1.654-1.346-3-3-3h-2c-1.654,0-3,1.346-3,3v0.608c0,0.723-0.374,1.37-1,1.732  c-0.626,0.361-1.374,0.362-2,0L8.474,7.036C7.042,6.209,5.203,6.701,4.375,8.134l-1,1.732c-0.829,1.436-0.338,3.269,1.098,4.098  L5,14.268C5.626,14.629,6,15.277,6,16s-0.374,1.371-1,1.732l-0.526,0.304c-1.436,0.829-1.927,2.662-1.098,4.098l1,1.732  c0.828,1.433,2.667,1.925,4.098,1.098L9,24.661c0.626-0.363,1.374-0.361,2,0c0.626,0.362,1,1.009,1,1.732V27c0,1.654,1.346,3,3,3h2  c1.654,0,3-1.346,3-3v-0.608c0-0.723,0.374-1.37,1-1.732c0.625-0.361,1.374-0.362,2,0l0.526,0.304  c1.432,0.826,3.271,0.334,4.098-1.098l1-1.732C29.453,20.698,28.962,18.865,27.526,18.036z M16,21c-2.757,0-5-2.243-5-5s2.243-5,5-5  s5,2.243,5,5S18.757,21,16,21z",id:"XMLID_273_"}),y=function(e){var t=e.svgRef,a=e.title,n=v(e,["svgRef","title"]);return c.a.createElement("svg",f({enableBackground:"new 0 0 32 32",id:"Glyph",viewBox:"0 0 32 32",xmlSpace:"preserve",ref:t},n),a?c.a.createElement("title",null,a):null,E)},b=c.a.forwardRef((function(e,t){return c.a.createElement(y,f({svgRef:t},e))}));a.p;function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var x=c.a.createElement("g",{"data-name":"telegram social media network chat",id:"telegram_social_media_network_chat"},c.a.createElement("path",{d:"M28.59,4.29a2.23,2.23,0,0,0-2.27-.36L3.41,13.1a1.83,1.83,0,0,0,0,3.38l1.48.61a1,1,0,0,0,1.31-.53,1,1,0,0,0-.54-1.31L4.56,14.8l22.51-9a.22.22,0,0,1,.23,0,.24.24,0,0,1,.08.23L23.27,25.21a.4.4,0,0,1-.26.3.39.39,0,0,1-.39-.06l-8-6.24,7.83-7.91a1,1,0,0,0-1.22-1.56L9.75,16.54a1,1,0,1,0,1,1.72l4.83-2.85L13.23,17.8a2,2,0,0,0,.2,3.08l8,6.15a2.4,2.4,0,0,0,1.47.5,2.47,2.47,0,0,0,.83-.15,2.37,2.37,0,0,0,1.52-1.75L29.33,6.47A2.23,2.23,0,0,0,28.59,4.29Z"})),L=function(e){var t=e.svgRef,a=e.title,n=w(e,["svgRef","title"]);return c.a.createElement("svg",C({viewBox:"0 0 32 32",ref:t},n),a?c.a.createElement("title",null,a):null,x)},k=c.a.forwardRef((function(e,t){return c.a.createElement(L,C({svgRef:t},e))}));a.p;function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function O(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var M=c.a.createElement("g",{id:"info"}),U=c.a.createElement("g",{id:"icons"},c.a.createElement("path",{d:"M20,1H4C1.8,1,0,2.8,0,5v10c0,2.2,1.8,4,4,4v3c0,0.9,1.1,1.3,1.7,0.7L9.4,19H20c2.2,0,4-1.8,4-4V5   C24,2.8,22.2,1,20,1z M14,13H8c-0.6,0-1-0.4-1-1c0-0.6,0.4-1,1-1h6c0.6,0,1,0.4,1,1C15,12.6,14.6,13,14,13z M16,9H8   C7.4,9,7,8.6,7,8c0-0.6,0.4-1,1-1h8c0.6,0,1,0.4,1,1C17,8.6,16.6,9,16,9z",id:"message"})),j=function(e){var t=e.svgRef,a=e.title,n=O(e,["svgRef","title"]);return c.a.createElement("svg",S({style:{enableBackground:"new 0 0 24 24"},viewBox:"0 0 24 24",xmlSpace:"preserve",ref:t},n),a?c.a.createElement("title",null,a):null,M,U)},R=c.a.forwardRef((function(e,t){return c.a.createElement(j,S({svgRef:t},e))}));a.p;function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function B(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var N=c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M16.5,14c-1.5,0-2.7,0.4-3.6,0.9c1.4,1.2,2,2.6,2.1,2.7l0.1,0.2V20h8v-2C23,18,21.4,14,16.5,14z"})),c.a.createElement("g",null,c.a.createElement("circle",{cx:16.5,cy:8.5,r:3.5}))),P=c.a.createElement("g",null,c.a.createElement("path",{d:"M4,8.5C4,6.6,5.6,5,7.5,5S11,6.6,11,8.5c0,1.9-1.6,3.5-3.5,3.5S4,10.4,4,8.5z M7.5,14C2.6,14,1,18,1,18v2h13v-2   C14,18,12.4,14,7.5,14z"})),T=function(e){var t=e.svgRef,a=e.title,n=B(e,["svgRef","title"]);return c.a.createElement("svg",I({enableBackground:"new 0 0 24 24",id:"Layer_1",viewBox:"0 0 24 24",xmlSpace:"preserve",ref:t},n),a?c.a.createElement("title",null,a):null,N,P)},V=c.a.forwardRef((function(e,t){return c.a.createElement(T,I({svgRef:t},e))}));a.p;function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var F=c.a.createElement("g",null,c.a.createElement("path",{d:"M9,9c0-1.7,1.3-3,3-3s3,1.3,3,3c0,1.7-1.3,3-3,3S9,10.7,9,9z M12,14c-4.6,0-6,3.3-6,3.3V19h12v-1.7C18,17.3,16.6,14,12,14z   "})),Z=c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("circle",{cx:18.5,cy:8.5,r:2.5})),c.a.createElement("g",null,c.a.createElement("path",{d:"M18.5,13c-1.2,0-2.1,0.3-2.8,0.8c2.3,1.1,3.2,3,3.2,3.2l0,0.1H23v-1.3C23,15.7,21.9,13,18.5,13z"}))),D=c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("circle",{cx:18.5,cy:8.5,r:2.5})),c.a.createElement("g",null,c.a.createElement("path",{d:"M18.5,13c-1.2,0-2.1,0.3-2.8,0.8c2.3,1.1,3.2,3,3.2,3.2l0,0.1H23v-1.3C23,15.7,21.9,13,18.5,13z"}))),A=c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("circle",{cx:5.5,cy:8.5,r:2.5})),c.a.createElement("g",null,c.a.createElement("path",{d:"M5.5,13c1.2,0,2.1,0.3,2.8,0.8c-2.3,1.1-3.2,3-3.2,3.2l0,0.1H1v-1.3C1,15.7,2.1,13,5.5,13z"}))),H=function(e){var t=e.svgRef,a=e.title,n=z(e,["svgRef","title"]);return c.a.createElement("svg",_({enableBackground:"new 0 0 24 24",id:"Layer_1",viewBox:"0 0 24 24",xmlSpace:"preserve",ref:t},n),a?c.a.createElement("title",null,a):null,F,Z,D,A)},W=c.a.forwardRef((function(e,t){return c.a.createElement(H,_({svgRef:t},e))})),q=(a.p,c.a.createElement(b,null)),K=c.a.createElement(k,null),Y=c.a.createElement(R,null),J=c.a.createElement(W,null),G=c.a.createElement(V,null),X=c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M 16 4 C 9.382813 4 4 9.382813 4 16 C 4 22.617188 9.382813 28 16 28 C 22.617188 28 28 22.617188 28 16 C 28 9.382813 22.617188 4 16 4 Z M 16 6 C 21.535156 6 26 10.464844 26 16 C 26 21.535156 21.535156 26 16 26 C 10.464844 26 6 21.535156 6 16 C 6 10.464844 10.464844 6 16 6 Z M 11.5 12 C 10.671875 12 10 12.671875 10 13.5 C 10 14.328125 10.671875 15 11.5 15 C 12.328125 15 13 14.328125 13 13.5 C 13 12.671875 12.328125 12 11.5 12 Z M 20.5 12 C 19.671875 12 19 12.671875 19 13.5 C 19 14.328125 19.671875 15 20.5 15 C 21.328125 15 22 14.328125 22 13.5 C 22 12.671875 21.328125 12 20.5 12 Z M 10.8125 19 L 9.09375 20 C 10.476563 22.386719 13.046875 24 16 24 C 18.953125 24 21.523438 22.386719 22.90625 20 L 21.1875 19 C 20.148438 20.792969 18.226563 22 16 22 C 13.773438 22 11.851563 20.792969 10.8125 19 Z"})),Q=c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M 7.21875 5.78125 L 5.78125 7.21875 L 14.5625 16 L 5.78125 24.78125 L 7.21875 26.21875 L 16 17.4375 L 24.78125 26.21875 L 26.21875 24.78125 L 17.4375 16 L 26.21875 7.21875 L 24.78125 5.78125 L 16 14.5625 Z"})),$=c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M 19 3 C 13.488281 3 9 7.488281 9 13 C 9 15.394531 9.839844 17.589844 11.25 19.3125 L 3.28125 27.28125 L 4.71875 28.71875 L 12.6875 20.75 C 14.410156 22.160156 16.605469 23 19 23 C 24.511719 23 29 18.511719 29 13 C 29 7.488281 24.511719 3 19 3 Z M 19 5 C 23.429688 5 27 8.570313 27 13 C 27 17.429688 23.429688 21 19 21 C 14.570313 21 11 17.429688 11 13 C 11 8.570313 14.570313 5 19 5 Z"})),ee=c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M 5 5 L 5 7 L 3 7 L 3 9 L 5 9 L 5 11 L 7 11 L 7 9 L 9 9 L 9 7 L 7 7 L 7 5 Z M 20.28125 7.9375 L 18.625 8 C 13.28125 8.191406 9 12.578125 9 17.96875 C 9 23.480469 13.488281 27.96875 19 27.96875 C 24.390625 27.96875 28.777344 23.6875 28.96875 18.34375 L 29.03125 16.71875 L 27.5625 17.40625 C 26.78125 17.777344 25.914063 17.96875 25 17.96875 C 21.675781 17.96875 19 15.292969 19 11.96875 C 19 11.054688 19.222656 10.21875 19.59375 9.4375 Z M 17.375 10.3125 C 17.25 10.867188 17 11.375 17 11.96875 C 17 16.375 20.59375 19.96875 25 19.96875 C 25.605469 19.96875 26.121094 19.722656 26.6875 19.59375 C 25.925781 23.21875 22.859375 25.96875 19 25.96875 C 14.570313 25.96875 11 22.398438 11 17.96875 C 11 14.117188 13.757813 11.082031 17.375 10.3125 Z"})),te=c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M 15 3 L 15 8 L 17 8 L 17 3 Z M 7.5 6.09375 L 6.09375 7.5 L 9.625 11.0625 L 11.0625 9.625 Z M 24.5 6.09375 L 20.9375 9.625 L 22.375 11.0625 L 25.90625 7.5 Z M 16 9 C 12.144531 9 9 12.144531 9 16 C 9 19.855469 12.144531 23 16 23 C 19.855469 23 23 19.855469 23 16 C 23 12.144531 19.855469 9 16 9 Z M 16 11 C 18.773438 11 21 13.226563 21 16 C 21 18.773438 18.773438 21 16 21 C 13.226563 21 11 18.773438 11 16 C 11 13.226563 13.226563 11 16 11 Z M 3 15 L 3 17 L 8 17 L 8 15 Z M 24 15 L 24 17 L 29 17 L 29 15 Z M 9.625 20.9375 L 6.09375 24.5 L 7.5 25.90625 L 11.0625 22.375 Z M 22.375 20.9375 L 20.9375 22.375 L 24.5 25.90625 L 25.90625 24.5 Z M 15 24 L 15 29 L 17 29 L 17 24 Z"})),ae=c.a.createElement("svg",{id:"Layer_1",version:"1.1",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("g",{id:"Layer_1_1_"},c.a.createElement("polygon",{points:"37.561,47.293 15.267,25 37.561,2.707 36.146,1.293 12.439,25 36.146,48.707"}))),ne=a(25),re=a.n(ne),se=(a(116),function(e){var t=e.user,a=e.isSelected,n=e.setSelectedUser,r=e.isTyping,s=void 0!==r&&r,l=Object(o.useContext)(m.a.MyThemeContext),i=l.theme,u=l.state;return c.a.createElement("li",{className:" chatlist--item ".concat(a?"active":""," ").concat(u),onClick:n},c.a.createElement("div",{className:"chat-image ".concat("Y"===t.online?"online":"")},t.imageUrl?c.a.createElement("img",{src:t.imageUrl,alt:"profile"}):c.a.createElement(c.a.Fragment,null),"Y"===t.online&&c.a.createElement("div",{className:"online-trk"})),c.a.createElement("div",{className:"chat-person"},c.a.createElement("span",{className:"chat-person--name",style:{color:i.textColor}},t.username),s?c.a.createElement("small",{className:"chat-person--typing"},"typing"):c.a.createElement(c.a.Fragment,null)))}),le=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).searchKey=function(e){r.setState({searchTerm:e.target.value})},r.renderChatList=function(e){if(e.error)console.log("chatlist",e.error);else{var t=r.state.chatListUsers;if(e.singleUser)t&&(t.length>0&&(t=t.filter((function(t){return t._id!==e.chatList._id}))),t=[e.chatList].concat(Object(i.a)(t)));else if(e.userDisconnected){var a=t.findIndex((function(t){return t._id===e.userId}));a>=0&&(t[a].online="N")}else t=e.chatList;r.setState({chatListUsers:t})}},r._renderNavbarAside=function(e){var t=e.theme;e.state,e.toggleTheme;return c.a.createElement("aside",{className:"nav-aside",style:{background:t.backgroundColor,color:t.textColor,fill:t.textColor}},c.a.createElement("div",{className:"nav-links"},c.a.createElement("div",{className:"header"},c.a.createElement("img",{src:re.a,alt:"logo"})),c.a.createElement("span",null,G),c.a.createElement("span",null,Y),c.a.createElement("span",null,J)),c.a.createElement("div",{className:"nav-sub"},c.a.createElement("span",null,q)))},r._renderAuthBox=function(e){var t=e.theme;e.state,e.toggleTheme;return c.a.createElement("div",{className:"auth-box",style:{background:t.contrastColorFade}},c.a.createElement("div",{className:"auth-img"}),c.a.createElement("div",{className:"auth-name"},"Odelola Joshua"))},r.state={selectedUserId:null,chatListUsers:null,searchTerm:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){p.getChatList(this.props.userId),p.eventEmitter.on("chat-list-response",this.renderChatList)}},{key:"componentWillUnmount",value:function(){p.eventEmitter.removeListener("chat-list-response",this.renderChatList)}},{key:"updateSelectedUser",value:function(e){this.setState({selectedUserId:e._id}),this.props.updateSelectedUser(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.isMobileViewPort,n=t.toggleValue;return c.a.createElement(m.a.Consumer,null,(function(t){var r=t.theme,s=t.state,l=t.toggleTheme;return c.a.createElement("div",{ref:e.props.sidebarRef,className:"app-aside ".concat(a?"float ".concat(n?"":"hide"):"")},e._renderNavbarAside({theme:r,state:s,toggleTheme:l}),e._renderAuthBox({theme:r,state:s,toggleTheme:l}),c.a.createElement("aside",{className:"chat-list",style:{background:r.contrastColorFall,color:r.textColor,boxShadow:"3px 0 5px ".concat(r.contrastColorFade)}},e.state.chatListUsers?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"aside-top"},e.state.chatListUsers.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"search-pane"},e.state.searchTerm.trim().length>0?c.a.createElement("span",{className:"close-search",onClick:function(){return e.setState({searchTerm:""})}},c.a.createElement("div",null,Q)):c.a.createElement("span",null,$),c.a.createElement("input",{type:"text",placeholder:"Find a chat here",onChange:e.searchKey,value:e.state.searchTerm,style:{background:r.contrastColorFade,color:r.textColor}})),c.a.createElement("span",{onClick:function(){return l()}},"night"===s?te:ee)):c.a.createElement(c.a.Fragment,null)),c.a.createElement("ul",null,e.state.chatListUsers.filter((function(t){return t.username.toLowerCase().includes(e.state.searchTerm.trim().toLowerCase())})).map((function(t,a){return c.a.createElement(se,{key:"chat-user".concat(a),isTyping:e.props.typing[t._id],isSelected:e.state.selectedUserId===t._id,user:t,setSelectedUser:function(){return e.updateSelectedUser(t)}})}))),c.a.createElement("div",{className:"aside-bottom"})):c.a.createElement(c.a.Fragment,null),c.a.createElement("div",{className:"alert \n                                ".concat(e.state.loading?"alert-info":""," \n                                ").concat(e.state.chatListUsers&&e.state.chatListUsers.length>0?"visibility-hidden":"")},e.state.chatListUsers?0===e.state.chatListUsers.length?"No User Available to chat.":"Error loading your chat! We will keep trying":"Loading your chat list.")))}))}}]),a}(o.Component),oe=Object(u.b)((function(e){var t=e.auth;return{userId:t.userId,token:t.token}}))(le),ce=a(83),ie=a.n(ce),ue=(a(117),a(4)),me=a.n(ue),de=a(15),ge=(a(118),a(20)),he=a(119),pe=a.n(he),fe=a(35),ve=a(120),Ee=a.n(ve),ye=a(121),be=a.n(ye),Ce=(a(123),function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).addScrollEvent=function(){e.scrollBoxRef.addEventListener("scroll",be.a.throttle(e.handleScrolling),!1),document.addEventListener("DOMContentLoaded",e.handleScrolling,!1)},e.handleScrolling=function(){var t=Object(de.a)(me.a.mark((function t(a){var n;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(parseInt(e.props.page)>1&&e.scrollBoxRef.scrollTop<=30?(n=(30-e.scrollBoxRef.scrollTop)/30*100,e.setState({loadingOffset:n-100})):e.setState({loadingOffset:-100}),e.state.loading){t.next=16;break}if(!(e.scrollBoxRef.scrollTop<=0)){t.next=16;break}return t.prev=3,e.setState({loading:!0}),t.next=7,e.props.onScrollPageRequest();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.warn(t.t0);case 12:return t.prev=12,e.setState({loading:!1}),e.setState((function(t){var a=e.contentBoxRef.getBoundingClientRect().height;return e.scrollBoxRef.scrollTo(0,a-t.boxHeight),{boxHeight:a}})),t.finish(12);case 16:case"end":return t.stop()}}),t,null,[[3,9,12,16]])})));return function(e){return t.apply(this,arguments)}}(),e.scrollBoxRef=null,e.contentBoxRef=null,e.loadingRef=c.a.createRef(),e.state={paddingTop:"30px",loading:!1,loadingOffset:-100,boxHeight:0},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.onScrollBoxMount(this.scrollBoxRef,this.contentBoxRef),this.setState({boxHeight:this.contentBoxRef.getBoundingClientRect().height}),this.addScrollEvent()}},{key:"handleObserver",value:function(){}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{ref:function(t){return e.scrollBoxRef=t},className:"scrollBox ".concat(this.props.className),style:{paddingTop:this.state.paddingTop}},c.a.createElement("div",{ref:this.loadingRef,className:"scrollBox--loader",style:{height:this.state.paddingTop,top:this.state.loading?0:"".concat(this.state.loadingOffset,"%")}},"Loading"),c.a.createElement("div",{ref:function(t){return e.contentBoxRef=t},className:"scrollBox--content ".concat(this.props.contentClassName)},this.props.children))}}]),a}(o.Component)),we=a(124),xe=a.n(we);var Le=function(e){var t=this,a=e.asset,n=(e.throttle,e.volume),r=void 0===n?.5:n;this.asset=function(e){if(!e)throw new Error("Invalid resource");return e}(a),this.volume=r,this.play=function(){new Audio(t.asset).play().then().catch(console.log)}},ke=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).receiveSocketMessages=function(e){var t=r.state.selectedUser;null!==t&&t._id===e.fromUserId&&(r.setState({messages:[].concat(Object(i.a)(r.state.messages),[e])}),r.scrollMessageContainer(),r.notifySound.play())},r.getMessages=Object(de.a)(me.a.mark((function e(){var t,a,n,s,l;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=r.props,a=t.userId,n=t.selectedUser,s=t.token,e.next=4,ge.a.getMessages(a,n._id,{page:r.state.page,limit:r.state.limit},s);case 4:(l=e.sent).error?alert("Unable to fetch messages"):(r.setState({messages:l.messages,page:l.currentPage,totalPages:l.totalPages}),r.scrollMessageContainer()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("an error occurred!!! \n",e.t0);case 11:return e.prev=11,e.finish(11);case 13:case"end":return e.stop()}}),e,null,[[0,8,11,13]])}))),r.handleKeyPress=function(e){var t=r.props.selectedUser;"Enter"===e.key?r.sendMessage():p.typingMessage(t._id)},r.sendMessage=function(){var e=r.props,t=e.userId,a=e.selectedUser,n=r.state.messageInput;""===n||void 0===n||null===n?alert("message can't be empty"):""===t||a&&void 0!==a&&(r.sendAndUpdateMessages({fromUserId:t,text:n.trim(),toUserId:a._id}),r.setState({messageInput:""}))},r.onScrollBoxMount=function(e,t){r.messagesBox=e,r.messageContentBox=t,r.scrollMessageContainer()},r.handleScrollPageRequest=Object(de.a)(me.a.mark((function e(){var t,a,n,s,l;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(parseInt(r.state.page)>1)){e.next=12;break}return e.prev=1,t=r.props,a=t.userId,n=t.selectedUser,s=t.token,e.next=5,ge.a.getMessages(a,n._id,{page:r.state.page-1,limit:r.state.limit},s);case 5:(l=e.sent).error?alert("Unable to fetch messages"):r.setState({messages:[].concat(Object(i.a)(l.messages),Object(i.a)(r.state.messages)),page:l.currentPage,totalPages:l.totalPages}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),r.handleScrollPageResult=function(e){console.log(e)},r.renderMessages=function(){if(0===r.state.messages.length)return[];var e=new Date(r.state.messages[0].date);return r.state.messages.map((function(t,a){var n,s,l=new Date(t.date),o=(s=e,!((n=l).getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()&&n.getDate()===s.getDate())&&l.getTime()>e.getTime());return o&&(e=l),c.a.createElement(c.a.Fragment,{key:"chat-msg-".concat(a)},o?c.a.createElement("div",{className:"chat-date-bk"},c.a.createElement("div",null),c.a.createElement("span",null,e.toDateString()),c.a.createElement("div",null)):c.a.createElement(c.a.Fragment,null),c.a.createElement(Se,{key:"chat-bx-".concat(a),isAuth:t.fromUserId===r.props.userId,message:t}))}))},r.renderChatUI=function(){return c.a.createElement(m.a.Consumer,null,(function(e){var t=e.theme;return c.a.createElement("main",{className:"chat-room",role:"main"},0===r.state.page?r.renderStartChatUI():c.a.createElement(c.a.Fragment,null),c.a.createElement(Ce,{scrollBoxRef:r.messagesBox,onScrollPageRequest:r.handleScrollPageRequest,onScrollPageResponse:r.handleScrollPageResult,onScrollBoxMount:r.onScrollBoxMount,className:"chat-bx",contentClassName:"content-bx"},c.a.createElement(c.a.Fragment,null,parseInt(r.state.page)<=1||null===r.state.page?r.renderStartChatUI():c.a.createElement(c.a.Fragment,null),r.renderMessages())),c.a.createElement("div",{className:"bottom-bar",style:{width:r.messagesBox?r.messagesBox.getBoundingClientRect().width:"100%"}},c.a.createElement("span",null,X),c.a.createElement("input",{placeholder:"Send a message",value:r.state.messageInput,onChange:function(e){return r.setState({messageInput:e.target.value})},onKeyPress:r.handleKeyPress,style:{background:t.contrastColorFall,color:t.textColor}}),c.a.createElement("span",{onClick:r.sendMessage},K)))}))},r.renderNoUserSelectedUI=function(){return c.a.createElement("div",{className:"no-chat-select-bx"},c.a.createElement("img",{src:ie.a,alt:"No Selected User"}))},r.renderStartChatUI=function(){return c.a.createElement("div",{className:"chat-start-bx"},c.a.createElement("img",{src:pe.a,alt:"Start Conversation"}))},r.messagesBox=null,r.messageContentBox=null,r.notifySound=new Le({asset:xe.a}),r.state={messageLoading:!1,messages:[],selectedUser:null,page:null,limit:10,totalPages:null,messageInput:""},r}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(e){null!==e.selectedUser&&this.props.selectedUser._id===e.selectedUser._id||this.getMessages()}},{key:"componentDidMount",value:function(){p.receiveMessage(),p.eventEmitter.on("add-message-response",this.receiveSocketMessages)}},{key:"componentWillUnmount",value:function(){p.eventEmitter.removeListener("add-message-response",this.receiveSocketMessages)}},{key:"sendAndUpdateMessages",value:function(e){try{p.sendMessage(e),this.setState({messages:[].concat(Object(i.a)(this.state.messages),[e])}),this.scrollMessageContainer()}catch(t){console.error("error"),alert("Can't send your message")}}},{key:"scrollMessageContainer",value:function(){var e=this;if(null!==this.messagesBox)try{setTimeout((function(){e.messagesBox.scrollTo(0,e.messageContentBox.scrollHeight)}),100)}catch(t){console.warn(t)}}},{key:"render",value:function(){return this.state.selectedUser?this.state.messageLoading?c.a.createElement(fe.a,null):this.renderChatUI():this.renderNoUserSelectedUI()}}],[{key:"getDerivedStateFromProps",value:function(e,t){return null===t.selectedUser||t.selectedUser._id!==e.selectedUser._id?{selectedUser:e.selectedUser,page:null,messages:[]}:null}}]),a}(c.a.Component),Se=function(e){var t=e.message,a=e.isAuth,n=Object(o.useContext)(m.a.MyThemeContext).state;return c.a.createElement("div",{className:"chat-row ".concat("admin"===t.username?"admin":a?"auth":""," ").concat(n)},"admin"===t.username||a?"":c.a.createElement("div",{className:"chat-auth"},t.username),c.a.createElement("div",{className:"chat-item"},Ee.a.emojify(t.text)))},Oe=Object(u.b)((function(e){return{userId:e.auth.userId,token:e.auth.token}}))(ke),Me=(a(125),function(e){var t=e.err,a=e.onAction,n=e.templateImage;return c.a.createElement(m.a.Consumer,null,(function(e){var r=e.theme;return c.a.createElement("div",{className:"error-fullpage",onClick:a||null},n&&c.a.createElement("img",{src:n,alt:"error"}),c.a.createElement("div",{className:"error"},t),c.a.createElement("small",{style:{color:r.textColorContrast}},"Click to refresh"))}))}),Ue=a(7),je=a(126),Re=a.n(je),Ie=function(){var e=Object(o.useContext)(m.a.MyThemeContext).theme;return c.a.createElement("span",{className:"logo-kit",style:{display:"flex",alignItems:"center"}},c.a.createElement("img",{src:re.a,alt:"logo"}),c.a.createElement("span",{style:{color:e.textColor}},"YouChat"))},Be=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).createSocketConnection=function(){var e=r.props.userId;if(e)try{p.createSocketConnection(e),p.receiveTypingMessage(),p.eventEmitter.on("typing-message-response",r.addTypingUser)}catch(t){r.setState({error:t.message})}finally{r.setState({isLoading:!1})}},r.handleViewPortResize=function(){var e=window.innerWidth;r.state.windowWidth!==e&&(e>1200?(r.setState({isMobileViewPort:!1}),window.removeEventListener("click",r.handleCloseSidebar)):r.setState({isMobileViewPort:!0,toggleValue:!1}),r.setState({windowWidth:e}))},r.switchToggleValue=function(){var e=!r.state.toggleValue;r.setState({toggleValue:e}),e?window.setTimeout((function(){return window.addEventListener("click",r.handleCloseSidebar)}),500):window.removeEventListener("click",r.handleCloseSidebar)},r.handleCloseSidebar=function(e){r.sidebarElem&&r.sidebarElem.current&&(!r.sidebarElem.current.contains(e.target)&&r.state.toggleValue&&r.switchToggleValue(),window.removeEventListener("click",r.handleCloseSidebar))},r.updateSelectedUser=function(e){r.setState({selectedUser:e}),r.switchToggleValue()},r.addTypingUser=function(e){var t=e.userId;r.state.typing[t]&&window.clearTimeout(r.state.typing[t]);var a=r.state.typing;a[t]=window.setTimeout((function(){return r.typingTimeout(t)}),3e3),r.setState({typing:a})},r.renderNoUserSelectedUI=function(){return c.a.createElement("div",{className:"no-chat-select-bx"},c.a.createElement("img",{src:ie.a,alt:""}),c.a.createElement("h4",null,"Select a Chat"))},r.sidebarElem=c.a.createRef(),r.state={isMobileViewPort:!1,toggleValue:!1,windowWidth:0,theme:null,isLoading:!0,selectedUser:null,error:null,typing:{}},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.handleViewPortResize(),window.addEventListener("DOMContentLoaded onLoad",this.handleViewPortResize),window.addEventListener("resize",this.handleViewPortResize),this.setState({toggleValue:!0}),this.createSocketConnection()}},{key:"componentWillUnmount",value:function(){this.handleViewPortResize(),window.removeEventListener("DOMContentLoaded",this.handleViewPortResize),window.removeEventListener("resize",this.handleViewPortResize),window.removeEventListener("click",this.handleCloseSidebar)}},{key:"componentDidUpdate",value:function(e){null!==e.userId&&e.userId===this.props.userId||this.createSocketConnection()}},{key:"typingTimeout",value:function(e){if(this.state.typing[e]){window.clearTimeout(this.state.typing[e]);var t=this.state.typing;t[e]=null,this.setState({typing:t})}}},{key:"render",value:function(){var e=this;if(this.props.error||this.state.error){var t=Ue.a.getAuthValue(),a=t.userId,n=t.token,r={onAction:function(){return e.props.error||e.state.error?e.props.checkUserToken(a,n):e.createSocketConnection()},templateImage:Re.a};return c.a.createElement(Me,Object.assign({err:this.props.error},r))}if(this.state.isLoading||this.props.isLoading)return c.a.createElement("div",{style:{height:"100vh"}},c.a.createElement(fe.a,null));var s={isMobileViewPort:this.state.isMobileViewPort,toggleValue:this.state.toggleValue,switchToggle:this.switchToggleValue};return c.a.createElement(m.a.Consumer,null,(function(t){var a=t.theme;return c.a.createElement("main",{className:"home-page"},c.a.createElement(oe,Object.assign({sidebarRef:e.sidebarElem,typing:e.state.typing,updateSelectedUser:e.updateSelectedUser},s)),c.a.createElement("div",{className:"chat-pane"},c.a.createElement("div",{className:"top-bar",style:{background:a.backgroundColor,color:a.textColor,fill:a.textColor,boxShadow:"0 3px 5px ".concat(a.contrastColorFade)}},s.isMobileViewPort?c.a.createElement("span",{className:"toggle-bar",onClick:s.switchToggle},ae):c.a.createElement(c.a.Fragment,null),c.a.createElement("div",null,c.a.createElement("span",null,e.state.selectedUser?e.state.selectedUser.username:c.a.createElement(Ie,null)))),c.a.createElement(Oe,Object.assign({selectedUser:e.state.selectedUser,typing:e.state.typing},s))))}))}}]),a}(c.a.Component);t.default=Object(u.b)((function(e){var t=e.auth;return{userId:t.userId,token:t.token,error:t.error,isLoading:t.isLoading}}),(function(e){return{checkUserToken:function(t,a){return e(ge.a.checkToken(t,a))}}}))(Be)},83:function(e,t,a){e.exports=a.p+"static/media/select_a_user.b5aa3db6.svg"}}]);
//# sourceMappingURL=4.1f8c409f.chunk.js.map